'use strict';/**
*  UI-REFACTORED
*    FROM --> ./legacy-web/src/main/js/apps/common/js/jquery/aacom/plugins/aacomHeroAds.js
*    TO   --> ./webapps/homepage-web/src/main/assets/js/plugins/aacom-hero-ads.js
**//* global captureExtClickThru:true */function aaHeroAds(slideshowContainer,source,params){//	Requires the jquery.cycle plugin & jquery swfobject plugin for flash objects
var self=this,slideshow=slideshowContainer,//jquery.cycle options
defaults={fit:1,height:594,width:1100,slideExpr:'div',speed:1000,timeout:8000,pager:'#hero-pager',next:'#hero-next',prev:'#hero-prev',pause:1,hideControls:0,before:function before(currSlideElement,nextSlideElement,options,forwardFlag){var nSlide=jQuery(source)[options.nextSlide];if(nSlide.isFlash){if(options.nextSlide!=options.currSlide){self.flashActions(nSlide,'rewind')}}},after:function after(currSlideElement,nextSlideElement,options,forwardFlag){var cSlide=jQuery(source)[options.currSlide];if(cSlide.isFlash){self.flashActions(cSlide,'play')}}},settings=jQuery.extend({},defaults,params);//	Apply changed properties to the defaults
//	Initialize the jquery.cycle object
self.init=function(){self.parseSlides();if(jQuery(source).length>1){jQuery(slideshow).find('div:first').fadeIn(1000,function(){jQuery(slideshow).cycle(settings)});$j('#aa-hero-ad-ctrl').show();self.initControls()}};self.initControls=function(){// Bind arrow keys to advance/rewind carousel
jQuery('#aa-hero-ad-frame').keydown(function(e){if(e.keyCode===37||e.keyCode===38){// If left or up arrow
e.preventDefault();e.stopPropagation();jQuery(slideshow).cycle('prev');// Focus the current slide
jQuery('#aa-hp-ad-hero').find('> div').eq(jQuery(slideshow).data('cycle.opts').currSlide).children().first().focus();self.pauseSlideshow()}else if(e.keyCode===39||e.keyCode===40){// If right or down arrow
e.preventDefault();e.stopPropagation();jQuery(slideshow).cycle('next');// Focus the current slide
jQuery('#aa-hp-ad-hero').find('> div').eq(jQuery(slideshow).data('cycle.opts').currSlide).children().first().focus();self.pauseSlideshow()}else if(e.keyCode===13||e.keyCode===32){// If enter or space
if(e.target.id==='hero-pause'){e.preventDefault();e.stopPropagation();jQuery('#hero-pause').mousedown()}}else{return}});var isPauseButtonClicked=false;// Add ability to pause the slideshow
jQuery('#hero-pause').mousedown(function(e){isPauseButtonClicked=true;if(jQuery('#hero-pause').hasClass('pause')){jQuery(slideshow).cycle('pause');jQuery('#hero-pause').find('img').prop('alt',AAcom.prototype.getProperty('carousel.play'))}else{jQuery(slideshow).cycle('resume');jQuery('#hero-pause').find('img').prop('alt',AAcom.prototype.getProperty('carousel.pause'))}jQuery('#hero-pause').toggleClass('pause');jQuery('#aa-hp-ad-hero').removeClass('autoPaused')});$j(document).on('focus','#aa-hero-ad-frame *',function(e){e.stopImmediatePropagation();if(e.target.id==='hero-pause'&&isPauseButtonClicked){isPauseButtonClicked=false;return}if(jQuery('#hero-pause').hasClass('pause')){jQuery('#aa-hp-ad-hero').addClass('autoPaused');self.pauseSlideshow()}}).on('blur','#aa-hero-ad-frame *',function(e){e.stopImmediatePropagation();isPauseButtonClicked=false;if(jQuery('#aa-hp-ad-hero').hasClass('autoPaused')){jQuery(slideshow).cycle('resume');jQuery('#hero-pause').find('img').prop('alt',AAcom.prototype.getProperty('carousel.pause'));jQuery('#hero-pause').addClass('pause');jQuery('#aa-hp-ad-hero').removeClass('autoPaused')}})};self.pauseSlideshow=function(){// Ensure slideshow is now paused
jQuery(slideshow).cycle('pause');jQuery('#hero-pause').find('img').prop('alt',AAcom.prototype.getProperty('carousel.play'));jQuery('#hero-pause').removeClass('pause')};self.parseSlides=function(){if(jQuery(source).length>0){jQuery('div',slideshow).remove();jQuery(source).each(function(i,item){var slide=jQuery('<div></div>');var adLink=jQuery('<a id="heroSlide'+item.index+'"></a>');if(item.isFlash&&jQuery.flash.available){jQuery(adLink).flash({swf:item.flashSrc,height:210,width:529})}else{adLink.append('<img src="'+item.imgSrc+'" alt="'+item.altText+'" />')}adLink.attr('class',item.className);if(self.isExternalLink(item.target)){adLink.attr('href',item.target);var temp=function temp(){captureExtClickThru(item.target,item.anchorLocation,item.altText,item.repositoryName,item.repositoryId,item.locale,item.isFlash,item.index)};item.isFlash?adLink.mouseup(temp):adLink.click(temp)}else{adLink.attr('href',item.target+(item.target.indexOf('?')!=-1?'&':'?')+'anchorLocation='+item.anchorLocation+'&reportedTitle='+item.altText+'&reportedPosition='+item.index+'&url='+self.getUrlParam(item.target)+'&_locale='+item.locale+'&repositoryName='+item.repositoryName+'&repositoryId='+item.repositoryId)}if(item.openInNewWin=='Y'){temp=function temp(){window.open(this.href);return false};item.isFlash?adLink.mouseup(temp):adLink.click(temp)}else{if(item.isFlash){adLink.mouseup(function(){location.href=this.href})}}slide.append(adLink);if(item.restrictionsApply=='Y'){var rLink='<a href="'+item.target+'&restrictionsAnchor=true#restrictions">'+item.restrictionsLink+'</a>';var rSpan=jQuery('<span>'+item.restrictionsText+' '+rLink+'</span>');rSpan.attr('id','aa-hero-faresale-terms');slide.append(rSpan)}slide.appendTo(slideshow)});if(jQuery(source).length>1&&settings.hideControls===0){jQuery('#aa-hero-ad-ctrl').fadeIn()}}};self.flashActions=function(slide,action){var flashMovie=jQuery('#heroSlide'+slide.index);flashMovie.flash(function(){try{if(action=='play'){this.Play()}if(action=='rewind'){this.Rewind()}}catch(e){}})};self.getUrlParam=function(name,url){var results=new RegExp('[\\?&]'+name+'=([^&#]*)').exec(url);return results===null?encodeURIComponent(url):results[1]};self.isExternalLink=function(link){if(link.indexOf('http')===0){if(link.indexOf('www.aa.com')!=1){return true}}return false};self.getTargetNoParams=function(url){var symbols=new Array('?',';','#');var targetNoParams=url;var index=-1;for(var i=0;i<symbols.length;++i){index=targetNoParams.indexOf(symbols[i]);if(index!=-1){targetNoParams=targetNoParams.substring(0,targetNoParams.indexOf(symbols[i]))}}return targetNoParams};self.getReportedTarget=function(url){var fileName=self.getUrlParam('fN',url);if(fileName.length>0){return fileName}else{return self.getTargetNoParams(url)}};self.init()}// ----------------------------------------------------------------------------------------------------------------------------------
// Register with jQuery as a plugin
// ----------------------------------------------------------------------------------------------------------------------------------
jQuery.fn.aaHeroAds=function(source,params){var i=0,obj;for(i;i<this.length;i++){obj=new aaHeroAds(this[i],source,params)}};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBsdWdpbnMvYWFjb20taGVyby1hZHMuanMiXSwibmFtZXMiOlsiYWFIZXJvQWRzIiwic2xpZGVzaG93Q29udGFpbmVyIiwic291cmNlIiwicGFyYW1zIiwic2VsZiIsInNsaWRlc2hvdyIsImRlZmF1bHRzIiwiZml0IiwiaGVpZ2h0Iiwid2lkdGgiLCJzbGlkZUV4cHIiLCJzcGVlZCIsInRpbWVvdXQiLCJwYWdlciIsIm5leHQiLCJwcmV2IiwicGF1c2UiLCJoaWRlQ29udHJvbHMiLCJiZWZvcmUiLCJjdXJyU2xpZGVFbGVtZW50IiwibmV4dFNsaWRlRWxlbWVudCIsIm9wdGlvbnMiLCJmb3J3YXJkRmxhZyIsIm5TbGlkZSIsImpRdWVyeSIsIm5leHRTbGlkZSIsImlzRmxhc2giLCJjdXJyU2xpZGUiLCJmbGFzaEFjdGlvbnMiLCJhZnRlciIsImNTbGlkZSIsInNldHRpbmdzIiwiZXh0ZW5kIiwiaW5pdCIsInBhcnNlU2xpZGVzIiwibGVuZ3RoIiwiZmluZCIsImZhZGVJbiIsImN5Y2xlIiwiJGoiLCJzaG93IiwiaW5pdENvbnRyb2xzIiwia2V5ZG93biIsImUiLCJrZXlDb2RlIiwicHJldmVudERlZmF1bHQiLCJzdG9wUHJvcGFnYXRpb24iLCJlcSIsImRhdGEiLCJjaGlsZHJlbiIsImZpcnN0IiwiZm9jdXMiLCJwYXVzZVNsaWRlc2hvdyIsInRhcmdldCIsImlkIiwibW91c2Vkb3duIiwiaXNQYXVzZUJ1dHRvbkNsaWNrZWQiLCJoYXNDbGFzcyIsInByb3AiLCJBQWNvbSIsInByb3RvdHlwZSIsImdldFByb3BlcnR5IiwidG9nZ2xlQ2xhc3MiLCJyZW1vdmVDbGFzcyIsImRvY3VtZW50Iiwib24iLCJzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24iLCJhZGRDbGFzcyIsInJlbW92ZSIsImVhY2giLCJpIiwiaXRlbSIsInNsaWRlIiwiYWRMaW5rIiwiaW5kZXgiLCJmbGFzaCIsImF2YWlsYWJsZSIsInN3ZiIsImZsYXNoU3JjIiwiYXBwZW5kIiwiaW1nU3JjIiwiYWx0VGV4dCIsImF0dHIiLCJjbGFzc05hbWUiLCJpc0V4dGVybmFsTGluayIsInRlbXAiLCJjYXB0dXJlRXh0Q2xpY2tUaHJ1IiwiYW5jaG9yTG9jYXRpb24iLCJyZXBvc2l0b3J5TmFtZSIsInJlcG9zaXRvcnlJZCIsImxvY2FsZSIsIm1vdXNldXAiLCJjbGljayIsImluZGV4T2YiLCJnZXRVcmxQYXJhbSIsIm9wZW5Jbk5ld1dpbiIsIndpbmRvdyIsIm9wZW4iLCJocmVmIiwibG9jYXRpb24iLCJyZXN0cmljdGlvbnNBcHBseSIsInJMaW5rIiwicmVzdHJpY3Rpb25zTGluayIsInJTcGFuIiwicmVzdHJpY3Rpb25zVGV4dCIsImFwcGVuZFRvIiwiYWN0aW9uIiwiZmxhc2hNb3ZpZSIsIlBsYXkiLCJSZXdpbmQiLCJuYW1lIiwidXJsIiwicmVzdWx0cyIsIlJlZ0V4cCIsImV4ZWMiLCJlbmNvZGVVUklDb21wb25lbnQiLCJsaW5rIiwiZ2V0VGFyZ2V0Tm9QYXJhbXMiLCJzeW1ib2xzIiwiQXJyYXkiLCJ0YXJnZXROb1BhcmFtcyIsInN1YnN0cmluZyIsImdldFJlcG9ydGVkVGFyZ2V0IiwiZmlsZU5hbWUiLCJmbiIsIm9iaiJdLCJtYXBwaW5ncyI6ImFBQUE7Ozs7R0FNQSxxQ0FFQSxRQUFTQSxVQUFULENBQW1CQyxrQkFBbkIsQ0FBdUNDLE1BQXZDLENBQStDQyxNQUEvQyxDQUF1RCxDQUNuRDtBQUNBLEdBQUlDLE1BQU8sSUFBWCxDQUNJQyxVQUFZSixrQkFEaEIsQ0FFSTtBQUNBSyxTQUFXLENBQ1BDLElBQUssQ0FERSxDQUVQQyxPQUFRLEdBRkQsQ0FHUEMsTUFBTyxJQUhBLENBSVBDLFVBQVcsS0FKSixDQUtQQyxNQUFPLElBTEEsQ0FNUEMsUUFBUyxJQU5GLENBT1BDLE1BQU8sYUFQQSxDQVFQQyxLQUFNLFlBUkMsQ0FTUEMsS0FBTSxZQVRDLENBVVBDLE1BQU8sQ0FWQSxDQVdQQyxhQUFjLENBWFAsQ0FZUEMsT0FBUSxnQkFBU0MsZ0JBQVQsQ0FBMkJDLGdCQUEzQixDQUE2Q0MsT0FB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QUFNLEdBQUk3SCxVQUFKLENBQWMsS0FBS3NFLENBQUwsQ0FBZCxDQUF1QnBFLE1BQXZCLENBQStCQyxNQUEvQixDQUNULENBQ0osQ0FORCIsImZpbGUiOiJwbHVnaW5zL2FhY29tLWhlcm8tYWRzLmpzIiwic291cmNlUm9vdCI6Ii9hc3NldHMvanMvIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4qICBVSS1SRUZBQ1RPUkVEXG4qICAgIEZST00gLS0+IC4vbGVnYWN5LXdlYi9zcmMvbWFpbi9qcy9hcHBzL2NvbW1vbi9qcy9qcXVlcnkvYWFjb20vcGx1Z2lucy9hYWNvbUhlcm9BZHMuanNcbiogICAgVE8gICAtLT4gLi93ZWJhcHBzL2hvbWVwYWdlLXdlYi9zcmMvbWFpbi9hc3NldHMvanMvcGx1Z2lucy9hYWNvbS1oZXJvLWFkcy5qc1xuKiovXG5cbi8qIGdsb2JhbCBjYXB0dXJlRXh0Q2xpY2tUaHJ1OnRydWUgKi9cblxuZnVuY3Rpb24gYWFIZXJvQWRzKHNsaWRlc2hvd0NvbnRhaW5lciwgc291cmNlLCBwYXJhbXMpIHtcbiAgICAvL1x0UmVxdWlyZXMgdGhlIGpxdWVyeS5jeWNsZSBwbHVnaW4gJiBqcXVlcnkgc3dmb2JqZWN0IHBsdWdpbiBmb3IgZmxhc2ggb2JqZWN0c1xuICAgIHZhciBzZWxmID0gdGhpcyxcbiAgICAgICAgc2xpZGVzaG93ID0gc2xpZGVzaG93Q29udGFpbmVyLFxuICAgICAgICAvL2pxdWVyeS5jeWNsZSBvcHRpb25zXG4gICAgICAgIGRlZmF1bHRzID0ge1xuICAgICAgICAgICAgZml0OiAxLFxuICAgICAgICAgICAgaGVpZ2h0OiA1OTQsXG4gICAgICAgICAgICB3aWR0aDogMTEwMCxcbiAgICAgICAgICAgIHNsaWRlRXhwcjogJ2RpdicsXG4gICAgICAgICAgICBzcGVlZDogMTAwMCxcbiAgICAgICAgICAgIHRpbWVvdXQ6IDgwMDAsXG4gICAgICAgICAgICBwYWdlcjogJyNoZXJvLXBhZ2VyJyxcbiAgICAgICAgICAgIG5leHQ6ICcjaGVyby1uZXh0JyxcbiAgICAgICAgICAgIHByZXY6ICcjaGVyby1wcmV2JyxcbiAgICAgICAgICAgIHBhdXNlOiAxLFxuICAgICAgICAgICAgaGlkZUNvbnRyb2xzOiAwLFxuICAgICAgICAgICAgYmVmb3JlOiBmdW5jdGlvbihjdXJyU2xpZGVFbGVtZW50LCBuZXh0U2xpZGVFbGVtZW50LCBvcHRpb25zLCBmb3J3YXJkRmxhZykge1xuICAgICAgICAgICAgICAgIHZhciBuU2xpZGUgPSBqUXVlcnkoc291cmNlKVtvcHRpb25zLm5leHRTbGlkZV07XG4gICAgICAgICAgICAgICAgaWYoblNsaWRlLmlzRmxhc2gpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYob3B0aW9ucy5uZXh0U2xpZGUgIT0gb3B0aW9ucy5jdXJyU2xpZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZmxhc2hBY3Rpb25zKG5TbGlkZSwgJ3Jld2luZCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFmdGVyOiBmdW5jdGlvbihjdXJyU2xpZGVFbGVtZW50LCBuZXh0U2xpZGVFbGVtZW50LCBvcHRpb25zLCBmb3J3YXJkRmxhZykge1xuICAgICAgICAgICAgICAgIHZhciBjU2xpZGUgPSBqUXVlcnkoc291cmNlKVtvcHRpb25zLmN1cnJTbGlkZV07XG4gICAgICAgICAgICAgICAgaWYoY1NsaWRlLmlzRmxhc2gpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5mbGFzaEFjdGlvbnMoY1NsaWRlLCAncGxheScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgc2V0dGluZ3MgPSBqUXVlcnkuZXh0ZW5kKHt9LCBkZWZhdWx0cywgcGFyYW1zKTsgLy9cdEFwcGx5IGNoYW5nZWQgcHJvcGVydGllcyB0byB0aGUgZGVmYXVsdHNcblxuICAgIC8vXHRJbml0aWFsaXplIHRoZSBqcXVlcnkuY3ljbGUgb2JqZWN0XG4gICAgc2VsZi5pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHNlbGYucGFyc2VTbGlkZXMoKTtcbiAgICAgICAgaWYoalF1ZXJ5KHNvdXJjZSkubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgalF1ZXJ5KHNsaWRlc2hvdykuZmluZCgnZGl2OmZpcnN0JykuZmFkZUluKDEwMDAsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGpRdWVyeShzbGlkZXNob3cpLmN5Y2xlKHNldHRpbmdzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJGooXCIjYWEtaGVyby1hZC1jdHJsXCIpLnNob3coKTtcbiAgICAgICAgICAgIHNlbGYuaW5pdENvbnRyb2xzKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHNlbGYuaW5pdENvbnRyb2xzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIEJpbmQgYXJyb3cga2V5cyB0byBhZHZhbmNlL3Jld2luZCBjYXJvdXNlbFxuICAgICAgICBqUXVlcnkoJyNhYS1oZXJvLWFkLWZyYW1lJykua2V5ZG93bihmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBpZihlLmtleUNvZGUgPT09IDM3IHx8IGUua2V5Q29kZSA9PT0gMzgpIHsgLy8gSWYgbGVmdCBvciB1cCBhcnJvd1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgIGpRdWVyeShzbGlkZXNob3cpLmN5Y2xlKCdwcmV2Jyk7XG4gICAgICAgICAgICAgICAgLy8gRm9jdXMgdGhlIGN1cnJlbnQgc2xpZGVcbiAgICAgICAgICAgICAgICBqUXVlcnkoJyNhYS1ocC1hZC1oZXJvJylcbiAgICAgICAgICAgICAgICAuZmluZCgnPiBkaXYnKVxuICAgICAgICAgICAgICAgIC5lcShqUXVlcnkoc2xpZGVzaG93KS5kYXRhKFwiY3ljbGUub3B0c1wiKS5jdXJyU2xpZGUpXG4gICAgICAgICAgICAgICAgLmNoaWxkcmVuKClcbiAgICAgICAgICAgICAgICAuZmlyc3QoKVxuICAgICAgICAgICAgICAgIC5mb2N1cygpO1xuXG4gICAgICAgICAgICAgICAgc2VsZi5wYXVzZVNsaWRlc2hvdygpO1xuICAgICAgICAgICAgfWVsc2UgaWYoZS5rZXlDb2RlID09PSAzOSB8fCBlLmtleUNvZGUgPT09IDQwKSB7IC8vIElmIHJpZ2h0IG9yIGRvd24gYXJyb3dcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICBqUXVlcnkoc2xpZGVzaG93KS5jeWNsZSgnbmV4dCcpO1xuICAgICAgICAgICAgICAgIC8vIEZvY3VzIHRoZSBjdXJyZW50IHNsaWRlXG4gICAgICAgICAgICAgICAgalF1ZXJ5KCcjYWEtaHAtYWQtaGVybycpXG4gICAgICAgICAgICAgICAgLmZpbmQoJz4gZGl2JylcbiAgICAgICAgICAgICAgICAuZXEoalF1ZXJ5KHNsaWRlc2hvdykuZGF0YShcImN5Y2xlLm9wdHNcIikuY3VyclNsaWRlKVxuICAgICAgICAgICAgICAgIC5jaGlsZHJlbigpXG4gICAgICAgICAgICAgICAgLmZpcnN0KClcbiAgICAgICAgICAgICAgICAuZm9jdXMoKTtcblxuICAgICAgICAgICAgICAgIHNlbGYucGF1c2VTbGlkZXNob3coKTtcbiAgICAgICAgICAgIH1lbHNlIGlmKGUua2V5Q29kZSA9PT0gMTMgfHwgZS5rZXlDb2RlID09PSAzMikgeyAvLyBJZiBlbnRlciBvciBzcGFjZVxuICAgICAgICAgICAgICAgIGlmKGUudGFyZ2V0LmlkID09PSBcImhlcm8tcGF1c2VcIikge1xuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIGpRdWVyeSgnI2hlcm8tcGF1c2UnKS5tb3VzZWRvd24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgaXNQYXVzZUJ1dHRvbkNsaWNrZWQgPSBmYWxzZTtcbiAgICAgICAgLy8gQWRkIGFiaWxpdHkgdG8gcGF1c2UgdGhlIHNsaWRlc2hvd1xuICAgICAgICBqUXVlcnkoJyNoZXJvLXBhdXNlJykubW91c2Vkb3duKGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGlzUGF1c2VCdXR0b25DbGlja2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmKGpRdWVyeSgnI2hlcm8tcGF1c2UnKS5oYXNDbGFzcyhcInBhdXNlXCIpKSB7XG4gICAgICAgICAgICAgICAgalF1ZXJ5KHNsaWRlc2hvdykuY3ljbGUoJ3BhdXNlJyk7XG4gICAgICAgICAgICAgICAgalF1ZXJ5KCcjaGVyby1wYXVzZScpLmZpbmQoJ2ltZycpLnByb3AoJ2FsdCcsIEFBY29tLnByb3RvdHlwZS5nZXRQcm9wZXJ0eSgnY2Fyb3VzZWwucGxheScpKTtcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIGpRdWVyeShzbGlkZXNob3cpLmN5Y2xlKCdyZXN1bWUnKTtcbiAgICAgICAgICAgICAgICBqUXVlcnkoJyNoZXJvLXBhdXNlJykuZmluZCgnaW1nJykucHJvcCgnYWx0JywgQUFjb20ucHJvdG90eXBlLmdldFByb3BlcnR5KCdjYXJvdXNlbC5wYXVzZScpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGpRdWVyeSgnI2hlcm8tcGF1c2UnKS50b2dnbGVDbGFzcygncGF1c2UnKTtcbiAgICAgICAgICAgIGpRdWVyeSgnI2FhLWhwLWFkLWhlcm8nKS5yZW1vdmVDbGFzcygnYXV0b1BhdXNlZCcpO1xuICAgICAgICB9KTtcbiAgICAgICAgJGooZG9jdW1lbnQpLm9uKCdmb2N1cycsIFwiI2FhLWhlcm8tYWQtZnJhbWUgKlwiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgaWYoZS50YXJnZXQuaWQgPT09IFwiaGVyby1wYXVzZVwiICYmIGlzUGF1c2VCdXR0b25DbGlja2VkKSB7XG4gICAgICAgICAgICAgICAgaXNQYXVzZUJ1dHRvbkNsaWNrZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZihqUXVlcnkoJyNoZXJvLXBhdXNlJykuaGFzQ2xhc3MoXCJwYXVzZVwiKSkge1xuICAgICAgICAgICAgICAgIGpRdWVyeSgnI2FhLWhwLWFkLWhlcm8nKS5hZGRDbGFzcygnYXV0b1BhdXNlZCcpO1xuICAgICAgICAgICAgICAgIHNlbGYucGF1c2VTbGlkZXNob3coKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkub24oJ2JsdXInLCBcIiNhYS1oZXJvLWFkLWZyYW1lICpcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIGlzUGF1c2VCdXR0b25DbGlja2VkID0gZmFsc2U7XG4gICAgICAgICAgICBpZihqUXVlcnkoJyNhYS1ocC1hZC1oZXJvJykuaGFzQ2xhc3MoXCJhdXRvUGF1c2VkXCIpKSB7XG4gICAgICAgICAgICAgICAgalF1ZXJ5KHNsaWRlc2hvdykuY3ljbGUoJ3Jlc3VtZScpO1xuICAgICAgICAgICAgICAgIGpRdWVyeSgnI2hlcm8tcGF1c2UnKS5maW5kKCdpbWcnKS5wcm9wKCdhbHQnLCBBQWNvbS5wcm90b3R5cGUuZ2V0UHJvcGVydHkoJ2Nhcm91c2VsLnBhdXNlJykpO1xuICAgICAgICAgICAgICAgIGpRdWVyeSgnI2hlcm8tcGF1c2UnKS5hZGRDbGFzcygncGF1c2UnKTtcbiAgICAgICAgICAgICAgICBqUXVlcnkoJyNhYS1ocC1hZC1oZXJvJykucmVtb3ZlQ2xhc3MoJ2F1dG9QYXVzZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBzZWxmLnBhdXNlU2xpZGVzaG93ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIEVuc3VyZSBzbGlkZXNob3cgaXMgbm93IHBhdXNlZFxuICAgICAgICBqUXVlcnkoc2xpZGVzaG93KS5jeWNsZSgncGF1c2UnKTtcbiAgICAgICAgalF1ZXJ5KCcjaGVyby1wYXVzZScpLmZpbmQoJ2ltZycpLnByb3AoJ2FsdCcsIEFBY29tLnByb3RvdHlwZS5nZXRQcm9wZXJ0eSgnY2Fyb3VzZWwucGxheScpKTtcbiAgICAgICAgalF1ZXJ5KCcjaGVyby1wYXVzZScpLnJlbW92ZUNsYXNzKCdwYXVzZScpO1xuICAgIH07XG4gICAgc2VsZi5wYXJzZVNsaWRlcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZihqUXVlcnkoc291cmNlKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBqUXVlcnkoXCJkaXZcIiwgc2xpZGVzaG93KS5yZW1vdmUoKTtcbiAgICAgICAgICAgIGpRdWVyeShzb3VyY2UpLmVhY2goZnVuY3Rpb24oaSwgaXRlbSkge1xuICAgICAgICAgICAgICAgIHZhciBzbGlkZSA9IGpRdWVyeSgnPGRpdj48L2Rpdj4nKTtcbiAgICAgICAgICAgICAgICB2YXIgYWRMaW5rID0galF1ZXJ5KCc8YSBpZD1cImhlcm9TbGlkZScgKyBpdGVtLmluZGV4ICsgJ1wiPjwvYT4nKTtcbiAgICAgICAgICAgICAgICBpZihpdGVtLmlzRmxhc2ggJiYgalF1ZXJ5LmZsYXNoLmF2YWlsYWJsZSkge1xuICAgICAgICAgICAgICAgICAgICBqUXVlcnkoYWRMaW5rKS5mbGFzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2Y6IGl0ZW0uZmxhc2hTcmMsXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDIxMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiA1MjlcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgIGFkTGluay5hcHBlbmQoJzxpbWcgc3JjPVwiJyArIGl0ZW0uaW1nU3JjICsgJ1wiIGFsdD1cIicgKyBpdGVtLmFsdFRleHQgKyAnXCIgLz4nKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBhZExpbmsuYXR0cignY2xhc3MnLCBpdGVtLmNsYXNzTmFtZSk7XG5cbiAgICAgICAgICAgICAgICBpZihzZWxmLmlzRXh0ZXJuYWxMaW5rKGl0ZW0udGFyZ2V0KSkge1xuICAgICAgICAgICAgICAgICAgICBhZExpbmsuYXR0cignaHJlZicsIGl0ZW0udGFyZ2V0KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhcHR1cmVFeHRDbGlja1RocnUoaXRlbS50YXJnZXQsIGl0ZW0uYW5jaG9yTG9jYXRpb24sIGl0ZW0uYWx0VGV4dCwgaXRlbS5yZXBvc2l0b3J5TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLnJlcG9zaXRvcnlJZCwgaXRlbS5sb2NhbGUsIGl0ZW0uaXNGbGFzaCwgaXRlbS5pbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIGl0ZW0uaXNGbGFzaCA/IGFkTGluay5tb3VzZXVwKHRlbXApIDogYWRMaW5rLmNsaWNrKHRlbXApO1xuICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICBhZExpbmsuYXR0cignaHJlZicsIGl0ZW0udGFyZ2V0ICsgKGl0ZW0udGFyZ2V0LmluZGV4T2YoXCI/XCIpICE9IC0xID8gXCImXCIgOiBcIj9cIikgKyBcImFuY2hvckxvY2F0aW9uPVwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uYW5jaG9yTG9jYXRpb24gKyBcIiZyZXBvcnRlZFRpdGxlPVwiICsgaXRlbS5hbHRUZXh0ICsgXCImcmVwb3J0ZWRQb3NpdGlvbj1cIiArIGl0ZW0uaW5kZXggK1xuICAgICAgICAgICAgICAgICAgICAgICAgXCImdXJsPVwiICsgc2VsZi5nZXRVcmxQYXJhbShpdGVtLnRhcmdldCkgKyBcIiZfbG9jYWxlPVwiICsgaXRlbS5sb2NhbGUgKyBcIiZyZXBvc2l0b3J5TmFtZT1cIiArXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtLnJlcG9zaXRvcnlOYW1lICsgXCImcmVwb3NpdG9yeUlkPVwiICsgaXRlbS5yZXBvc2l0b3J5SWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZihpdGVtLm9wZW5Jbk5ld1dpbiA9PSAnWScpIHtcbiAgICAgICAgICAgICAgICAgICAgdGVtcCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm9wZW4odGhpcy5ocmVmKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5pc0ZsYXNoID8gYWRMaW5rLm1vdXNldXAodGVtcCkgOiBhZExpbmsuY2xpY2sodGVtcCk7XG4gICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgIGlmKGl0ZW0uaXNGbGFzaCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWRMaW5rLm1vdXNldXAoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24uaHJlZiA9IHRoaXMuaHJlZjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNsaWRlLmFwcGVuZChhZExpbmspO1xuICAgICAgICAgICAgICAgIGlmKGl0ZW0ucmVzdHJpY3Rpb25zQXBwbHkgPT0gJ1knKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByTGluayA9ICc8YSBocmVmPVwiJyArIGl0ZW0udGFyZ2V0ICsgJyZyZXN0cmljdGlvbnNBbmNob3I9dHJ1ZSNyZXN0cmljdGlvbnNcIj4nICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0ucmVzdHJpY3Rpb25zTGluayArICc8L2E+JztcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJTcGFuID0galF1ZXJ5KCc8c3Bhbj4nICsgaXRlbS5yZXN0cmljdGlvbnNUZXh0ICsgJyAnICsgckxpbmsgKyAnPC9zcGFuPicpO1xuICAgICAgICAgICAgICAgICAgICByU3Bhbi5hdHRyKCdpZCcsICdhYS1oZXJvLWZhcmVzYWxlLXRlcm1zJyk7XG4gICAgICAgICAgICAgICAgICAgIHNsaWRlLmFwcGVuZChyU3Bhbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNsaWRlLmFwcGVuZFRvKHNsaWRlc2hvdyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmKGpRdWVyeShzb3VyY2UpLmxlbmd0aCA+IDEgJiYgc2V0dGluZ3MuaGlkZUNvbnRyb2xzID09PSAwKSB7XG4gICAgICAgICAgICAgICAgalF1ZXJ5KCcjYWEtaGVyby1hZC1jdHJsJykuZmFkZUluKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgc2VsZi5mbGFzaEFjdGlvbnMgPSBmdW5jdGlvbihzbGlkZSwgYWN0aW9uKSB7XG4gICAgICAgIHZhciBmbGFzaE1vdmllID0galF1ZXJ5KCcjaGVyb1NsaWRlJyArIHNsaWRlLmluZGV4KTtcbiAgICAgICAgZmxhc2hNb3ZpZS5mbGFzaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYoYWN0aW9uID09ICdwbGF5Jykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLlBsYXkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYoYWN0aW9uID09ICdyZXdpbmQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuUmV3aW5kKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfWNhdGNoIChlKSB7fVxuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgc2VsZi5nZXRVcmxQYXJhbSA9IGZ1bmN0aW9uKG5hbWUsIHVybCkge1xuICAgICAgICB2YXIgcmVzdWx0cyA9IG5ldyBSZWdFeHAoJ1tcXFxcPyZdJyArIG5hbWUgKyAnPShbXiYjXSopJykuZXhlYyh1cmwpO1xuICAgICAgICByZXR1cm4gKHJlc3VsdHMgPT09IG51bGwpID8gZW5jb2RlVVJJQ29tcG9uZW50KHVybCkgOiByZXN1bHRzWzFdO1xuICAgIH07XG5cbiAgICBzZWxmLmlzRXh0ZXJuYWxMaW5rID0gZnVuY3Rpb24obGluaykge1xuICAgICAgICBpZihsaW5rLmluZGV4T2YoXCJodHRwXCIpID09PSAwKSB7XG4gICAgICAgICAgICBpZihsaW5rLmluZGV4T2YoXCJ3d3cuYWEuY29tXCIpICE9IDEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcblxuICAgIHNlbGYuZ2V0VGFyZ2V0Tm9QYXJhbXMgPSBmdW5jdGlvbih1cmwpIHtcbiAgICAgICAgdmFyIHN5bWJvbHMgPSBuZXcgQXJyYXkoXCI/XCIsIFwiO1wiLCBcIiNcIik7XG4gICAgICAgIHZhciB0YXJnZXROb1BhcmFtcyA9IHVybDtcbiAgICAgICAgdmFyIGluZGV4ID0gLTE7XG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBzeW1ib2xzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBpbmRleCA9IHRhcmdldE5vUGFyYW1zLmluZGV4T2Yoc3ltYm9sc1tpXSk7XG4gICAgICAgICAgICBpZihpbmRleCAhPSAtMSkge1xuICAgICAgICAgICAgICAgIHRhcmdldE5vUGFyYW1zID0gdGFyZ2V0Tm9QYXJhbXMuc3Vic3RyaW5nKDAsIHRhcmdldE5vUGFyYW1zLmluZGV4T2Yoc3ltYm9sc1tpXSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0YXJnZXROb1BhcmFtcztcbiAgICB9O1xuXG4gICAgc2VsZi5nZXRSZXBvcnRlZFRhcmdldCA9IGZ1bmN0aW9uKHVybCkge1xuICAgICAgICB2YXIgZmlsZU5hbWUgPSBzZWxmLmdldFVybFBhcmFtKFwiZk5cIiwgdXJsKTtcbiAgICAgICAgaWYoZmlsZU5hbWUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmV0dXJuIGZpbGVOYW1lO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIHJldHVybiBzZWxmLmdldFRhcmdldE5vUGFyYW1zKHVybCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHNlbGYuaW5pdCgpO1xufVxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBSZWdpc3RlciB3aXRoIGpRdWVyeSBhcyBhIHBsdWdpblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxualF1ZXJ5LmZuLmFhSGVyb0FkcyA9IGZ1bmN0aW9uKHNvdXJjZSwgcGFyYW1zKSB7XG4gICAgdmFyIGkgPSAwLFxuICAgICAgICBvYmo7XG4gICAgZm9yKGk7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIG9iaiA9IG5ldyBhYUhlcm9BZHModGhpc1tpXSwgc291cmNlLCBwYXJhbXMpO1xuICAgIH1cbn07XG4iXX0=
//# sourceMappingURL=aacom-hero-ads.min.js.map
